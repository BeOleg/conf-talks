# –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏ –≤ GraphQL?

–í –ª—é–±–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏, –∏ –≤ –≤–∞—à–∏–º GraphQL API –æ–Ω–∏ —Ç–æ–∂–µ –±—É–¥—É—Ç. –°–µ –ª—è –≤–∏.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏ –≤ GraphQL? –ö —á–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º –≤–∞—à–µ–≥–æ –ê–ü–ò? –ö–∞–∫ –ª—É—á—à–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç—É? –î–∞ –∏ –∫–∞–∫ –≤–æ–æ–±—â–µ –æ–Ω–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ GraphQL? –í —ç—Ç–æ—Ç —Å—Ç–∞—Ç—å–µ –º—ã —Ä–∞–∑–±–µ—Ä–µ–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏ –≤ GraphQL.

–î–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ –±–µ–≥–ª–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫–∏–µ –æ—à–∏–±–æ–∫ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –∏ —Å—Ä–∞–∑—É —Ä–∞–∑–æ–±—å–µ–º –∏—Ö –Ω–∞ –≥—Ä—É–ø–ø—ã:

- –§–ê–¢–ê–õ–¨–ù–´–ï –û–®–ò–ë–ö–ò
  - 500 Internal Server Error
  - –∫–æ–Ω—á–∏–ª–∞—Å—å –ø–∞–º—è—Ç—å
  - –∑–∞–±—ã–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç
  - –≥—Ä—É–±–∞—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ
- –û–®–ò–ë–ö–ò –í–ê–õ–ò–î–ê–¶–ò–ò
  - –æ—à–∏–±–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ GraphQL-–∑–∞–ø—Ä–æ—Å–∞
  - –∑–∞–ø—Ä–æ—Å–∏–ª–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ
  - –Ω–µ –ø–µ—Ä–µ–¥–∞–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç
  - –Ω–µ –ø–µ—Ä–µ–¥–∞–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
- RUNTIME –û–®–ò–ë–ö–ò
  - throw new Error("")
  - undefined is not a function (—é–∑–∞–π—Ç–µ Flowtype –∏–ª–∏ TypeScript —É–∂–µ –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤)
  - –æ—à–∏–±–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ GraphQL-–æ—Ç–≤–µ—Ç–∞
- –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ï –û–®–ò–ë–ö–ò
  - –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
  - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏

## –ö–∞–∫ –æ–±—ã—á–Ω–æ GraphQL-—Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –æ—à–∏–±–∫–∏?

–ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ `—Ñ–∞—Ç–∞–ª—å–Ω–∞—è` –æ—à–∏–±–∫–∞, —Ç–æ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –∫–æ–¥. –≠—Ç–æ –∫–∞–∫ –æ–±—ã—á–Ω–æ.

–ù–æ –≤–æ—Ç —á—Ç–æ –Ω–µ–æ–±—ã—á–Ω–æ–µ –≤ GraphQL, —Ç–∞–∫ –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –ª—é–±–∞—è –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ 200. –û–±—ã—á–Ω–æ –±—ã–≤–∞–ª—ã–µ REST API —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ —ç—Ç–æ–º –º–æ–º–µ–Ω—Ç–µ —Ö–æ—Ç—è—Ç –≤—ã–ø—Ä—ã–≥–Ω—É—Ç—å –∏–∑ –æ–∫–Ω–∞. –ù–∏–∫–∞–∫–∏—Ö –≤–∞–º 401, 403, 404 –∏ –ø—Ä–æ—á–∏—Ö –∫–æ–¥–æ–≤ –Ω–µ –±—É–¥–µ—Ç.

–°–¥–µ–ª–∞–ª–∏ —ç—Ç–æ —Ç–∞–∫, –ø–æ—Ç–æ–º—É —á—Ç–æ GraphQL –ø–æ —Å–ø—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –Ω–∏ –∫ –∫–∞–∫–æ–º—É –ø—Ä–æ—Ç–æ–∫–æ–ª—É. –í—ã –º–æ–∂–µ—Ç–µ –≥–æ–Ω—è—Ç—å GraphQL-–∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ websockets, ssh, telnet –Ω—É –∏ –æ–±—ã—á–Ω—ã–π http. –ö–æ–ª—å –Ω–µ—Ç –∂–µ—Å—Ç–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ø—Ä–æ—Ç–æ–∫–æ–ª—É, —Ç–æ –æ—à–∏–±–∫–∏ –≤—Å–µ —É–Ω–µ—Å–ª–∏ –≤ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞.

–í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –æ—Ç–≤–µ—Ç –æ—Ç GraphQL –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:

```js
{
  data: {}, // –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
  errors: [...], // –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ—à–∏–±–æ–∫, –º–∞—Å—Å–∏–≤ –º–µ–∂–¥—É –ø—Ä–æ—á–∏–º üò≥
  extensions: {}, // –æ–±—ä–µ–∫—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Å—é–¥–∞ –ø–∏—Ö–∞–π—Ç–µ —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ
  // –¥—Ä—É–≥–∏–µ –∫–ª—é—á–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã –ø–æ —Å–ø–µ–∫–µ!
}
```

–ü–µ—Ä–≤–æ–µ —á—Ç–æ –±—Ä–æ—Å–∞–µ—Ç—Å—è –≤ –≥–ª–∞–∑–∞ —Ç–∞–∫ —ç—Ç–æ —Ç–æ, —á—Ç–æ GraphQL –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ—à–∏–±–æ–∫. Wow! –¢.–∫. –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–π —Å –∑–∞–ø—Ä–æ—Å–æ–º –∫—É—á–∏ —Ä–µ—Å—É—Ä—Å–æ–≤, —Ç–æ GraphQL –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –≤–∞–º —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–∞ –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫–∏. –ò —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –ø–æ–ª –æ—Ç–≤–µ—Ç–∞ –ª—É—á—à–µ, —á–µ–º –Ω–∏—á–µ–≥–æ.

## –§–∞—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏

–§–∞—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ —á–∞—â–µ –≤—Å–µ–≥–æ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –≤–∏–¥ ‚Äî `500 Internal Server Error`. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –æ–±—ã—á–Ω–æ –µ—Å–ª–∏ –∫–æ–Ω—á–∏–ª–∞—Å—å –ø–∞–º—è—Ç—å, –∑–∞–±—ã–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç, —Å–æ–≤–µ—Ä—à–∏–ª–∏ –≥—Ä—É–±—É—é —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É –≤ –∫–æ–¥–µ. –î–∞ –º–Ω–æ–≥–æ –µ—â–µ —á–µ–≥–æ. –ü—Ä–∏ —ç—Ç–æ–º –¥–µ–ª–æ –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ GraphQL-–∑–∞–ø—Ä–æ—Å–∞. –ò –∑–¥–µ—Å—å —Ä–µ–∑–æ–Ω–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 500 –æ—à–∏–±–∫—É.

–ù–µ—Ç —Ä–∞–±–æ—Ç—ã GraphQL, –Ω–µ—Ç –∫–æ–¥–∞ 200.

–§—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä—ã –æ–±—ã—á–Ω–æ —ç—Ç–æ –¥–µ–ª–æ –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–≤–æ–µ–≥–æ Network Layer'a. –ü–æ–ª—É—á–∏–ª–∏ 500, –∑–Ω–∞—á–∏—Ç –≥–¥–µ-—Ç–æ –∫–æ—Å—è—á–Ω—É–ª–∏—Å—å –±—ç–∫–µ–Ω–¥–µ—Ä—ã —Å –∞–¥–º–∏–Ω–∞–º–∏.

## –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∏–ª –∑–∞–ø—Ä–æ—Å –∏ –¥–µ–ª–∏–≥–∏—Ä–æ–≤–∞–ª –µ–≥–æ –≤ –ø–∞–∫–µ—Ç [graphql](https://github.com/graphql/graphql-js). –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ GraphQL-–∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é. –ï—Å–ª–∏ –∫—Ä–∏–≤–æ–π –∑–∞–ø—Ä–æ—Å, —Ç–æ –Ω–∏–∫–∞–∫–∏–µ resolve-–º–µ—Ç–æ–¥—ã –≤—ã–∑–≤–∞–Ω—ã –Ω–µ –±—É–¥—É—Ç –∏ —Ç—É–ø–æ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –æ—à–∏–±–∫–∞:

```js
{
  errors: [
    {
      message: 'Cannot query field "wrong" on type "Query".',
      locations: [{ line: 3, column: 11 }],
    },
  ],
}

// –∏–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫–∞—è
{
  errors: [
    {
      message: 'Variable "$q" of required type "String!" was not provided.',
      locations: [{ line: 2, column: 16 }],
    },
  ],
}
```

–ü—Ä–∏ —ç—Ç–æ–º —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω–µ—Ç —Å—Ç–∞—Ç—É—Å 200. –ü—Ä–∏ –∫–æ–¥–µ 200, –æ—à–∏–±–∫–∞ –æ–±—ã—á–Ω–æ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä–∞. –ù–æ –∏ –±–µ–∫–µ–Ω–¥–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –∫ —ç—Ç–æ–º—É –ø—Ä–∏—á–∞—Å—Ç–µ–Ω, –µ—Å–ª–∏ –≤–∑—è–ª –∏ —É–¥–∞–ª–∏–ª –∏–∑ —Å—Ö–µ–º—ã –∫–∞–∫–æ–µ-—Ç–æ –ø–æ–ª–µ—é –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–µ–ø–µ—Ä—å —Å—Ç–∞–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.

## Runtime –æ—à–∏–±–∫–∏

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—à–µ–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é, —Ç–æ –æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∏ –≤—ã–∑—ã–≤–∞—Ç—å resolve-–º–µ—Ç–æ–¥—ã –≤–∞—à–µ–π —Å—Ö–µ–º—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∏—Å–ª–∞–Ω–Ω–æ–º—É GraphQL-–∑–∞–ø—Ä–æ—Å—É. –ò –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –≤–Ω—É—Ç—Ä–∏ resolve-–º–µ—Ç–æ–¥–∞ –≤—ã–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è Exception (`throw new Error()`), –Ω–µ–≤–∞–∂–Ω–æ —è–≤–Ω–æ –≤—ã –µ–≥–æ –≤—ã–±—Ä–æ—Å–∏–ª–∏, –∏–ª–∏ –æ–Ω –ø—Ä–∏–ª–µ—Ç–µ–ª –∏–∑ –Ω–µ–¥—Ä —á—É–∂–∏—Ö –ø–∞–∫–µ—Ç–æ–≤. –¢–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∞—è –º–∞–≥–∏—è:

- –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ—Ç–∫–∏ –≥—Ä–∞—Ñ–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ resolve-–º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –Ω–µ –±—É–¥—É—Ç)
- –Ω–∞ –º–µ—Å—Ç–µ —ç–ª–µ–º–µ–Ω—Ç–∞, –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–¥–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `null`
- –æ—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ `errors`
- –ù–û –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Å–µ–¥–Ω–∏–µ –≤–µ—Ç–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

–•–æ—Ä–æ—à–æ —ç—Ç–æ –ø–æ–Ω—è—Ç—å –º–æ–∂–Ω–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–¥–∞:

```js
const schema = new GraphQLSchema({
  query: new GraphQLObjectType({
    name: 'Query',
    fields: {
      search: {
        args: {
          q: { type: GraphQLString },
        },
        resolve: (_, args) => {
          if (!args.q) throw new Error('missing q');
          return { text: args.q };
        },
        type: new GraphQLObjectType({
          name: 'Record',
          fields: {
            text: {
              type: GraphQLString,
              resolve: source => source.text,
            },
          },
        }),
      },
    },
  }),
});

const res = await graphql({
  schema,
  source: `
    query {
      s1: search(q: "ok") { text }
      s2: search { text }
      s3: search(q: "good") { text }
    }
  `,
});
```

–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω —Å–ª–µ–¥—É—é—â–∏–π:

```js
{
  errors: [
    { message: 'missing q', locations: [{ line: 4, column: 11 }], path: ['s2'] }
  ],
  data: { s1: { text: 'ok' }, s2: null, s3: { text: 'good' } },
}
```

–ü–æ–ª–µ `s1` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í `s2` –±—ã–ª–∞ –≤—ã–±—Ä–æ—à–µ–Ω–∞ –æ—à–∏–±–∫–∞, –ø–æ—ç—Ç–æ–º—É –æ–Ω–æ —Å—Ç–∞–ª–æ `null` –∏ –≤ –º–∞—Å—Å–∏–≤ `errors` –¥–æ–±–∞–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞. –ò –¥–∞–ª—å—à–µ –ø–æ–ª–µ `s3` —Ç–æ–∂–µ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –≤–µ—Ä–Ω—É–ª–æ—Å—å.

–¢.–µ. –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –±—ã–ª–∞ –≤—ã–±—Ä–æ—à–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `null` –∏ –ø–∏—à–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –≤ –º–∞—Å—Å–∏–≤. –ê –≤—Å—è –æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–∞–∫ –Ω–∏ –≤ —á–µ–º –Ω–µ –±—ã–≤–∞–ª–æ. –í–æ—Ç —Ç–∞–∫–æ–π –≤–æ—Ç –æ–Ω –¥–æ–±—Ä—ã–π GraphQL, —Ö–æ—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å –¥–∞ –≤–µ—Ä–Ω–µ—Ç.

–¢–æ—á–Ω–æ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –±—ç–∫–µ–Ω–¥–µ—Ä –≤–µ—Ä–Ω—É–ª –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤ resolve-–º–µ—Ç–æ–¥–µ. GraphQL –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Ä–Ω—É—Ç—å "–ª–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ" –≤ `data`.  

–í–æ—Ç –ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –º—ã –ø–æ —Å—Ö–µ–º–µ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫, –Ω–æ –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π. –í–º–µ—Å—Ç–æ "–ª–µ–≤–æ–≥–æ" –∑–Ω–∞—á–µ–Ω–∏—è, –æ–Ω –≤–µ—Ä–Ω–µ—Ç `null` –∏ –ø—Ä–∏ —ç—Ç–æ–º –¥–æ–±–∞–≤–∏—Ç –æ—à–∏–±–∫—É –≤ –º–∞—Å—Å–∏–≤:

```js
const schema = new GraphQLSchema({
  query: new GraphQLObjectType({
    name: 'Query',
    fields: {
      ooops: {
        type: new GraphQLList(GraphQLString),
        resolve: () => ['ok', { hey: 'wrong non String value' }],
      },
    },
  }),
});

const res = await graphql(schema, `query { ooops }`);

expect(res).toEqual({
  errors: [
    {
      message: 'String cannot represent value: { hey: "wrong non String value" }',
      locations: [{ line: 3, column: 11 }],
      path: ['ooops', 1],
    },
  ],
  data: { ooops: ['ok', null] },
});
```

–ü–µ—Ä–µ–Ω–µ—Å–µ–º—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –ù–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –æ–¥–Ω—É –æ—à–∏–±–∫—É –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –≤—ã–≤–µ—Å—Ç–∏ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, –∞ –µ—Å–ª–∏ –æ—à–∏–±–æ–∫ –¥–≤–µ? –ê –µ—Å–ª–∏ —É –Ω–∞—Å —Å–ª–æ–∂–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –æ—à–∏–±–∫–∏ –Ω–∞–¥–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –í–æ—Ç —Ç—É—Ç —É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –∞–¥—Å–∫–∞—è –±–æ–ª—å –∏ –ø–µ—á–∞–ª—å —Å —Ç–∞–∫–∏–º –º–∞—Å—Å–∏–≤–æ–º –æ—à–∏–±–æ–∫. –ï–≥–æ –Ω–∞–¥–æ –æ—Ç–¥–µ–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç—å, –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞. –ö–∞–∫-—Ç–æ –ø–µ—Ä–µ–¥–∞—Ç—å –æ—à–∏–±–∫—É –≤ –Ω—É–∂–Ω—É—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –∏ –Ω–∞ –Ω—É–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å. –í–æ–±—â–µ–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–∏–ª—å–Ω–æ –∏–∑–≥–æ–ª—è—Ç—å—Å—è –≤ –∫–æ–¥–µ –ø—Ä–æ–±—Ä–æ—Å–æ–º –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–ø–µ—Ä—Ç–∏ –∏ –ª–æ–≥–∏–∫–æ–π.

**–ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∫–∞–∫ –±—ç–∫–µ–Ω–¥–µ—Ä –º–æ–∂–µ—Ç —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∂–∏–∑–Ω—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä—É, —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª.**

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—à–∏–±–∫–∏

–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—à–∏–±–∫–∏? –ù—É —ç—Ç–æ –∫–æ–≥–¥–∞ –≤–∞–º –≥–¥–µ-—Ç–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞–¥–æ –≤—ã–≤–µ—Å—Ç–∏ "–∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", –∏–ª–∏ "—É –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç", –∏–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –Ω–∞ 23 —ç–ª–µ–º–µ–Ω—Ç–µ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ "–∑–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞".

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –æ—à–∏–±–æ–∫ GraphQL. –¢–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–∏–ª—å–Ω–æ –∏–∑–≥–æ–ª—è—Ç—å—Å—è, —á—Ç–æ–±—ã –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –≤ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ.

–ù–æ —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ —Ä–µ—à–∏—Ç—å, –µ—Å–ª–∏ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä—è–º–æ –≤ `data` –Ω–∞ –Ω—É–∂–Ω–æ–º —É—Ä–æ–≤–Ω–µ, –∞ –Ω–µ —á–µ—Ä–µ–∑ `errors`. –î–ª—è —ç—Ç–æ–≥–æ –≤ GraphQL –µ—Å—Ç—å `Union-—Ç–∏–ø—ã`, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ª–∏–±–æ –∑–∞–ø–∏—Å—å —Å –¥–∞–Ω–Ω—ã–º–∏, –ª–∏–±–æ –æ—à–∏–±–∫—É.

–î–∞–≤–∞–π—Ç–µ —Å—Ä–∞–∑—É –∫ –∂–∏–≤–æ–º—É –ø—Ä–∏–º–µ—Ä—É. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —á—Ç–æ –Ω–∞–º –Ω–∞–¥–æ –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π. –ü—Ä–∏—á–µ–º –∫ –∫–∞–∫–∏–º-—Ç–æ —Å—Ç–∞—Ç—å—è–º —É –Ω–∞—Å –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–∞, –ª–∏–±–æ –∏—Ö —É–¥–∞–ª–∏–ª–∏. –¢–∞–∫ –¥–∞–≤–∞–π—Ç–µ –∏ –±—É–¥–µ–º –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–ø–∏—Å–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å Union-—Ç–∏–ø –∏–∑ `Article`, `ErrorNotFound` –∏ `ErrorNoAccess`. –°–æ —Å—Ç–æ—Ä–æ–Ω—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä–∞ –º–æ–∂–Ω–æ —Ç–æ–≥–¥–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –≤–æ—Ç —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å:

```graphql
query {
  list(q: "text") {
    __typename # <----- –º–∞–≥–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–µ—Ä–Ω–µ—Ç –∏–º—è —Ç–∏–ø–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏
    ...on Article {
      title
      publishDate
    }
    ...on ErrorNotFound {
      message
    }
    ...on ErrorNoAccess {
      message
    }
  }
}
```

–¢.–µ. –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–∞—Ö –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª–µ `__typename`, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º—è —Ç–∏–ø–∞. –ö –∑–∞–ø—Ä–æ—Å—É –≤—ã—à–µ GraphQL-–æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π:

```js
{
  data: {
    list: [
      { __typename: 'Article', publishDate: '2018-09-10', title: 'Article 1' },
      { __typename: 'ErrorNotFound', message: 'missing article' },
      { __typename: 'ErrorNoAccess', message: 'you should be owner' },
    ],
  },
}
```

–ü—Ä–∏ —Ç–∞–∫–æ–º –ø–æ–¥—Ö–æ–¥–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ –Ω—É–∂–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –Ω–∞ –Ω—É–∂–Ω–æ–º —É—Ä–æ–≤–Ω–µ. –ö–æ–¥ –∑–∞—Ö–ª–∞–º–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∏ –≤—ã–≤–µ—Å—Ç–∏ –ª–∏–±–æ –¥–∞–Ω–Ω—ã–µ, –ª–∏–±–æ –∫—Ä–∞—Å–∏–≤—ã–π –±–ª–æ–∫ —Å –æ—à–∏–±–æ—á–∫–æ–π.

–ü—Ä–∏—á–µ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä—ã –º–æ–≥—É—Ç –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π —Ç–∏–ø –æ—à–∏–±–∫–∏ –≤–µ—Ä–Ω—É–ª—Å—è. –ò –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –æ–Ω–∞ –∏—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç. –≠—Ç–æ –∂–µ –ø—Ä–æ—Å—Ç–æ –æ–±—ã—á–Ω—ã–π —Ç–∏–ø –≤ —Å—Ö–µ–º–µ, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤ —Å–µ–±–µ –ª—é–±—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è.

–ö–∞–∫ —ç—Ç–æ –¥–µ–ª–æ –º–æ–∂–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –Ω–∞ –±—ç–∫–µ–Ω–¥–µ? –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ. –í–æ—Ç –ø—Ä–∏–º–µ—Ä:

```js
// –û–±—ä—è–≤–ª—è–µ–º –∫–ª–∞—Å—Å –°—Ç–∞—Ç—å–∏
class Article {
  title: string;
  publishDate: string;

  constructor(title, publishDate) {
    this.title = title;
    this.publishDate = publishDate;
  }
}

// –ò —Å—Ä–∞–∑—É –∂–µ –æ–±—ä—è–≤–∏–º GraphQL-—Ç–∏–ø
const ArticleType = new GraphQLObjectType({
  name: 'Article',
  fields: () => ({
    title: { type: GraphQLString },
    publishDate: { type: GraphQLString },
  }),
});


// –û–±—ä—è–≤–∏–º –¥–≤–∞ –ø—Ä–æ—Å—Ç—ã—Ö –∫–ª–∞—Å—Å–∞ —Å –æ—à–∏–±–∫–æ–π
class ErrorNotFound {
  message: string;
  constructor(message) {
    this.message = message;
  }
}
class ErrorNoAccess {
  message: string;
  constructor(message) {
    this.message = message;
  }
}

// –ò –∏—Ö —Ç–∏–ø—ã –¥–ª—è GraphQL
const ErrorNotFoundType = new GraphQLObjectType({
  name: 'ErrorNotFound',
  fields: () => ({
    message: { type: GraphQLString },
  }),
});
const ErrorNoAccessType = new GraphQLObjectType({
  name: 'ErrorNoAccess',
  fields: () => ({
    message: { type: GraphQLString },
  }),
});

// –ù—É –∞ —Ç–µ–ø–µ—Ä—å —Å–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ.
// –û–±—ä—è–≤–ª—è–µ–º –Ω–∞—à UNION-—Ç–∏–ø –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª–∏–±–æ —Å—Ç–∞—Ç—å—é, –ª–∏–±–æ –æ—à–∏–±–∫–∏
const ListResultType = new GraphQLUnionType({
  // –î–∞–µ–º –∏–º—è —Ç–∏–ø—É.
  // –ó–¥–æ—Ä–æ–≤–æ –µ—Å–ª–∏ –µ—Å–ª–∏ –≤—ã –≤—ã—Ä–∞–±–æ—Ç–∞–µ—Ç–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏—é –≤ —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥–µ
  // –∏ –∫ —Ç–∞–∫–∏–º Union-—Ç–∏–ø–∞–º –±—É–¥–∏—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å Result
  name: 'ListResult',

  // –∫–∞–∫ —Ö–æ—Ä–æ—à–∏–µ –±–µ–∫–µ–Ω–¥–µ—Ä—ã –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–∫–æ–µ-–Ω–∏–±—É–¥—å –æ–ø–∏—Å–∞–Ω–∏–µ
  description: 'List of items which can be one of the following types: Article, ErrorNotFound',

  // –æ–±—ä—è–≤–ª—è–µ–º —Ç–∏–ø—ã —á–µ—Ä–µ–∑ –º–∞—Å—Å–∏–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã
  types: () => [ArticleType, ErrorNotFoundType, ErrorNoAccessType],

  // –ù—É –∏ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ –Ω–∞–¥–æ –æ–±—ä—è–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞.
  // resolve-—Ñ—É–Ω–∫—Ü–∏–∏ (—Å–º–æ—Ç—Ä–∏ –Ω–∏–∂–µ –ø–æ–ª–µ Query.list) –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JS-–æ–±—ä–µ–∫—Ç
  // –Ω–æ –≤–æ—Ç GraphQL'—é –Ω—É–∂–Ω–æ –∫–∞–∫-—Ç–æ JS-–æ–±—ä–µ–∫—Ç, —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ GraphQL-—Ç–∏–ø
  // –∏–Ω–∞—á–µ –∫–∞–∫ –æ–Ω —É–∑–Ω–∞–µ—Ç —á—Ç–æ –Ω–∞–¥–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–ª–µ __typename
  resolveType: value => {
    if (value instanceof Article) {
      return ArticleType;
    } else if (value instanceof ErrorNotFound) {
      return ErrorNotFoundType;
    } else if (value instanceof ErrorNoAccess) {
      return ErrorNoAccessType;
    }
    return null;
  },
});

// –ù—É –∏ –≤–∏—à–µ–Ω—å–∫–∞ –Ω–∞ —Ç–æ—Ä—Ç–µ
// –ü–∏—à–µ–º –ø—Ä–æ—Å—Ç—É—é —Å—Ö–µ–º–∫—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ –°—Ç–∞—Ç–µ–π –∏ –û—à–∏–±–æ–∫.
const schema = new GraphQLSchema({
  query: new GraphQLObjectType({
    name: 'Query',
    fields: {
      list: {
        type: new GraphQLList(ListResultType),
        args: {
          q: { type: GraphQLString },
        },
        resolve: () => {
          return [
            new Article('Article 1', '2018-09-10'),
            new ErrorNotFound('missing article'),
            new ErrorNoAccess('you should be owner'),
          ];
        },
      },
    },
  }),
});
```

–û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –∏ –∫—Ä–∞—Å–∏–≤–æ. –ê —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ —É–¥–æ–±–Ω–æ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä–æ–≤.

**–õ—é–±–∏—Ç–µ –±—Ä–∞—Ç–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä–∞ —Å–≤–æ–µ–≥–æ üòâ**

## –°—Å—ã–ª–∫–∏ –ø–æ —Ç–µ–º–µ

- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –≤ –≤–∏–¥–µ —Ç–µ—Å—Ç–æ–≤ –∫ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ](./__tests__/errors-test.js)
- [–í–∏–¥–µ–æ –ø—Ä–æ –æ—à–∏–±–∫–∏ –æ—Ç Sasha Solomon](https://www.youtube.com/watch?v=GYBhHUGR1ZY)
- [–ü–æ—Ö–æ–∂–µ–µ –≤–∏–¥–µ–æ –ø—Ä–æ –æ—à–∏–±–∫–∏ –æ—Ç Eloy Dur√°n](https://www.youtube.com/watch?v=qKA-n8p-sNc), —É –≤—Å—ë-—Ç–∞–∫–∏ –°–∞—à–∏ –ª—É—á—à–µ