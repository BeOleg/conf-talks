# GraphQL-—Ç–∏–ø—ã

-----

### GraphQL-—Å—Ö–µ–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤, –ø–æ–ª–µ–π –∏ –º–µ—Ç–æ–¥–æ–≤ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

-----

## GraphQL-—Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –ø–æ–ª—è

## –ü–æ–ª—è —Å–æ–¥–µ—Ä–∂–∞—Ç –≤ —Å–µ–±–µ GraphQL-—Ç–∏–ø

-----

#### –¢–∏–ø ‚Äî –ü–æ–ª—è ‚Äî –¢–∏–ø ‚Äî –ü–æ–ª—è ‚Äî –¢–∏–ø ‚Äî –ü–æ–ª—è ‚Äî ...

–î—É–º–∞–µ—Ç–µ –≤—Å–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ? ü§î <!-- .element: class="fragment" -->

–ö–æ–Ω–µ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ! <!-- .element: class="fragment" -->

–ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü –¥—Ä—É–≥–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GraphQL <br /> üòà <!-- .element: class="fragment" -->

### –ü–æ–≥–Ω–∞–ª–∏ —É—Å–∫–æ—Ä—è—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ! <!-- .element: class="fragment" -->

-----

## –ï—Å—Ç—å –¥–≤–µ –≥—Ä—É–ø–ø—ã —Ç–∏–ø–æ–≤:

- Output ‚Äî –¥–ª—è –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö
- Input ‚Äî –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö

–ê –µ—â–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ ü§Ø <!-- .element: class="fragment" -->

-----

### –°–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:

- Scalar types (Output, Input) <!-- .element: class="fragment" -->
- Custom scalar types (Output, Input) <!-- .element: class="fragment" -->
- Object types (—Ç–æ–ª—å–∫–æ Output) <!-- .element: class="fragment" -->
- Input types (—Ç–æ–ª—å–∫–æ Input) <!-- .element: class="fragment" -->
- Enumeration types (Output, Input) <!-- .element: class="fragment" -->
- Lists and Non-Null (–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ç–∏–ø–æ–≤ –¥–ª—è Output, Input) <!-- .element: class="fragment" -->
- Interfaces (—Ç–æ–ª—å–∫–æ Output) <!-- .element: class="fragment" -->
- Union types (—Ç–æ–ª—å–∫–æ Output) <!-- .element: class="fragment" -->
- Root types (—Ç–æ–ª—å–∫–æ Output) <!-- .element: class="fragment" -->
- Directives (–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è —Ç–∏–ø–æ–≤ –∏ —Ä–∞–Ω—Ç–∞–π–º–∞) <!-- .element: class="fragment" -->

-----

### –í—Å—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –æ—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –¥–æ—Ö–æ–¥—á–∏–≤–æ

### [—Ä–∞—Å–ø–∏—Å–∞–Ω–∞ —É –º–µ–Ω—è –≤ –≥–∏—Ç—Ö–∞–±–µ](https://github.com/nodkz/conf-talks/blob/master/particles/graphql/types/README.md)

### –Ω–∞ —Ä—É—Å—Å–∫–æ–º! üòÉ <!-- .element: class="fragment" -->

#### <br /> C–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å –≤ —Ä–∞–º–∫–∞—Ö –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ HolyJS <!-- .element: class="fragment" -->

-----

## Scalar types

## 5 –±–∞–∑–æ–≤—ã—Ö —Å–∫–∞–ª—è—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤

- `GraphQLInt` ‚Äî —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
- `GraphQLFloat` ‚Äî —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
- `GraphQLString` ‚Äî —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ UTF-8
- `GraphQLBoolean` ‚Äî true/false
- `GraphQLID` ‚Äî —Å—Ç—Ä–æ–∫–∞; —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

-----

## Custom scalar types

–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å–∫–∞–ª—è—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤?

Date, Email, URL, LimitedString, Password, SmallInt ...

<br/>

–ò—Ö –º–æ–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ! <!-- .element: class="fragment" -->

-----

#### –û–±—ä—è–≤–ª—è–µ–º —Å–≤–æ–π Custom scalar type

<pre><code>import { GraphQLScalarType, GraphQLError } from 'graphql';

export default new GraphQLScalarType({
  // 1) --- –û–ü–†–ï–î–ï–õ–Ø–ï–ú –ú–ï–¢–ê–î–ê–ù–ù–´–ï –¢–ò–ü–ê ---
  // –£ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è
  name: 'DateTimestamp',
  // –•–æ—Ä–æ—à–∏–º —Ç–æ–Ω–æ–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞, 
  // —á—Ç–æ–±—ã –æ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
  description: 'A string which represents a HTTP URL',
  
  // 2) --- –û–ü–†–ï–î–ï–õ–Ø–ï–ú –ö–ê–ö –¢–ò–ü –û–¢–î–ê–í–ê–¢–¨ –ö–õ–ò–ï–ù–¢–£ ---
  // –ß—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É –≤ GraphQL-–æ—Ç–≤–µ—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø–æ–ª—è
  // –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `serialize`,
  // –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã–π json-—Ç–∏–ø
  serialize: (v: Date) => v.getTime(), // return 1536417553

  // 3) --- –û–ü–†–ï–î–ï–õ–Ø–ï–ú –ö–ê–ö –¢–ò–ü –ü–†–ò–ù–ò–ú–ê–¢–¨ –û–¢ –ö–õ–ò–ï–ù–¢–ê ---
  // –ß—Ç–æ–±—ã –ø—Ä–∏–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, –ø—Ä–æ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å
  // –≤ –Ω—É–∂–Ω—ã–π —Ç–∏–ø/–æ–±—ä–µ–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–∞–º –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏:

  // 3.1) –ø–µ—Ä–≤–∞—è —ç—Ç–æ `parseValue`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç
  // –ø–µ—Ä–µ–¥–∞–ª –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GraphQL-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
  // {
  //   variableValues: { "date": 1536417553 }
  //   source: `query ($date: DateTimestamp) { setDate(date: $date) }`
  // }
  parseValue: (v: integer) => new Date(v),

  // 3.2) –≤—Ç–æ—Ä–∞—è —ç—Ç–æ `parseLiteral`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç 
  // –ø–µ—Ä–µ–¥–∞–ª –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ç–µ–ª–µ GraphQL-–∑–∞–ø—Ä–æ—Å–∞:
  // {
  //   source: `query { setDate(date: 1536417553) }`
  // }
  parseLiteral: (ast) => {
    if (ast.kind === Kind.STRING) {
      throw new GraphQLError('Field error: value must be Integer');
    } else if (ast.kind === Kind.INT) {
      return new Date(parseInt(ast.value, 10)); // ast value is always in string format
    }
    return null;
  },
});
</code></pre>

1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–∏–ø–∞
2. –ö–∞–∫ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç—É
3. –ö–∞–∫ –¥–µ-—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
  
<span class="fragment" data-code-focus="1-3" />
<span class="fragment" data-code-focus="4" />
<span class="fragment" data-code-focus="5-9" />
<span class="fragment" data-code-focus="11" />
<span class="fragment" data-code-focus="12-15" />
<span class="fragment" data-code-focus="17-19" />
<span class="fragment" data-code-focus="21-27" />
<span class="fragment" data-code-focus="29-41" />

-----

#### –í—Å–µ —Ç–∏–ø—ã –≤ —Ä–∞–º–∫–∞—Ö GraphQL-—Å—Ö–µ–º—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞.

#### –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å –æ–¥–Ω–∏–º –∏–º–µ–Ω–µ–º.

-----